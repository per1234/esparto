<html>
   <head>
	<title>%$24% [%$21%]</title>
	<link rel="stylesheet" type="text/css" href="esp.css">
	<script src="grf.js"></script>
	<script src="esp.js"></script>
	<script src="ws.js"></script>
   </head>
   <body>
		<div class="box">
			<div>
				<div id="bn">
					<div id="bnb"><div id="lex">%$21%</div></div>
				</div>
				<div class="vn">Esparto v%$0%</div>
			</div>
		</div>
		<div class="box" id="grass">
			<table >
			<tr id="titles" >
				<th>0</th>
				<th>1</th>
				<th>2</th>
				<th>3</th>
				<th>4</th>
				<th>5</th>
				<th>6</th>
				<th>7</th>
				<th>8</th>
				<th>9</th>
				<th>10</th>
				<th>11</th>
				<th>12</th>
				<th>13</th>
				<th>14</th>
				<th>15</th>
				<th>16</th>
				<th>17</th>
			</tr>
			<tr>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
			</tr>	
			<tr>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
				<td class="lbl">&nbsp;&nbsp;</td>
			</tr>
			<tr>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
				<td><div class="pin ld led-red"></div></td>
			</tr>	
			</table>
		</div>
		
	<div id="btns" class="box">
		<div>
			<div class="cmd"><img title="WiFi" class="hand wifi cfg"></div>				
			<div class="cmd"><img title="System" class="hand gear cfg"></div>
			<div class="cmd"><img title="%$24%" class="hand esp cfg"></div>
			<div class="cmd"><img title="Config" class="hand tool cfg"></div>
			<div class="cmd"><img title="Command" class="hand run cfg"></div>
         <div class="cmd"><img title="Pins" class="hand dynp cfg"></div>	
         <div class="cmd"><img title="Log" class="hand logs cfg"></div>	
         <div class="cmd"><img title="Spool" class="hand spool cfg"></div>	
			<div class="cmd"><span id="hs">&nbsp;</span></div>
			<div class="cmd"><img title="Home" onclick="homefn();" class="hand home" id="home"></div>
			<div class="cmd"><img title="Reboot" onclick="bootfn();" class="hand boot"></div>
			<div class="cmd"><img onclick="factfn();" class="hand fact" title="*FACTORY RESET*"></div>
		</div>
		<div id="lights">
			<div class="cmd" id="mqtt0"><div id="mqtt" class="ld led-red"></div></div>
			<div class="cmd" id="hb"><div class="heart"></div></div>
         <div class="cmd"><div class="dk">&nbsp;UpTime:</div><div class="lt"><div id="upt" class="mut">0</div></div></div>
		</div>
	</div>			
						
	<div id="wifi" class="box eph wifi">
		<div id="fb">
			<form onsubmit="return changeDevice(event);">
 				<input id="root" type="hidden" value="%$27%" />
				<div class="fel"><label for="newname">Device:</label><input id="newname" required name="device" value="%$24%"></div>
				<div class="fel"><label for="lexname">Alexa Name:</label><input id="lexname" required name="lex" value="%$21%"></div>
				<div class="fel"><label for="ssid">SSID:</label><select id="ssid" required name="ssid"></select></div>
				<div class="fel"><label for="pw">Psk:</label><input id="pw" type="password" name="pw" value="%$26%"></div>
				<div class="fel"><label>&nbsp;</label><button type="submit">Update Details</button></div>
			</form>
		</div>
	</div>
	
	<div id="esp" class="box eph esp">
			<div ><div class="dk">Board:</div>&nbsp;<div class="lt">%$36%</div></div>
			<div ><div class="dk">Chip :</div>&nbsp;<div class="lt">%$23%</div></div>
			<div ><div class="dk">IP   :</div>&nbsp;<div id="IP" class="lt">%$3%</div></div>
			<div ><div class="dk">Flash:</div>&nbsp;<div class="lt">%$33%</div></div>
			<div ><div class="dk">NBoot:</div>&nbsp;<div class="lt">%$1%</div></div>
			<div ><div class="dk">Code :</div>&nbsp;<div class="lt">%$22%</div></div>
	</div>
	
	<div id="gear" class="box eph gear">
			<div class="sth">
					<div class="stm">ADC:</div><div class="right"><div id="adc" class="lt std">0</div></div>
					<div class="stt">min:</div><div class="right"><div id="adcmin" class="lt std">0</div></div>
					<div class="stt">max:</div><div class="right"><div id="adcmax" class="lt std">0</div></div>
			</div>
			<div class="can"><canvas id="ga" width=360 height=100></canvas></div>
			
			<div class="sth">
					<div class="stm">HEAP:</div><div class="right"><div id="heap" class="lt std">0</div></div>
					<div class="stt">min:</div><div class="right"><div id="heapmin" class="lt std">0</div></div>
					<div class="stt">max:</div><div class="right"><div id="heapmax" class="lt std">0</div></div>
			</div>
			<div class="can"><canvas id="gh" width=360 height=100></canvas></div>
			
			<div class="sth">
					<div class="stm">Q:</div><div class="right"><div id="Q" class="lt std">0</div></div>
					<div class="stt">min:</div><div class="right"><div id="Qmin" class="lt std">0</div></div>
					<div class="stt">max:</div><div class="right"><div id="Qmax" class="lt std">0</div></div>
			</div>
			<div class="can"><canvas id="gq" width=360 height=100></canvas></div>
			
			<div class="sth">
					<div class="stm">Pins:</div><div class="right"><div id="pps" class="lt std">0</div></div>
					<div class="stt">min:</div><div class="right"><div id="ppsmin" class="lt std">0</div></div>
					<div class="stt">max:</div><div class="right"><div id="ppsmax" class="lt std">0</div></div>
			</div>
			<div class="can"><canvas id="gp" width=360 height=100></canvas></div>
         
			<div class="sth">
					<div class="stm">CPU%:</div><div class="right"><div id="load" class="lt std">0</div></div>
					<div class="stt">min:</div><div class="right"><div id="loadmin" class="lt std">0</div></div>
					<div class="stt">max:</div><div class="right"><div id="loadmax" class="lt std">0</div></div>
			</div>
			<div class="can"><canvas id="gl" width=360 height=100></canvas></div>
			
	</div>
	
	<div id="tool" class="box eph tool">
	</div>
		
	<div id="run" class="box eph run">
		<div id="tcmd">
			<div ><div class="dk">Topics:</div>&nbsp;<div class="lt"><select id="csel" required onchange="selchange(event);"></select></div></div>
			<div ><div class="dk">Topic:</div>&nbsp;<div class="lt"><input id="invoke" required></div></div>
			<div ><div class="dk">Payload:</div>&nbsp;<div class="lt"><input id="payload"></div></div>
			<div ><div class="dk">&nbsp;</div>&nbsp;<div class="lt"><button onclick="doit(event);" id="doit">Simulate MQTT</button></div></div>
		</div>
	</div>
   
   <div id="dynp" class="box eph dynp">
   	<div id="dfd">
			<form onsubmit="return dynamicPin(event);">
            <fieldset id="fsp" disabled>
               <legend>GPIO Pin</legend>
               <div class="fel">
                  <label for="dpsel">Pin</label>
                  <input id="dpsel" name="dynpin" disabled required value="click red pin #"/>
               </div>
               <div class="fel">
                  <label for="selstyle">Type</label>
                  <select id="selstyle" name="style" onChange="dpstyleChange(this);">
                     <option value="0" selected>[select pin type]</option>                    
                     <option value="3">DEBOUNCED</option>
                     <option value="12">DEFAULT OUTPUT</option>
                     <option value="7">ENCODER</option>
                     <option value="8">ENCODER_AUTO</option>
                     <option value="4">FILTERED</option>	
                     <option value="5">LATCHING</option>
                     <option value="2">OUTPUT</option>
                     <option value="11">POLLED</option>                   
                     <option value="1">RAW</option>
                     <option value="9">REPORTING</option>
                     <option value="6">RETRIGGERING</option>
                     <option value="13">STD 3-STAGE</option>                     
                     <option value="10">TIMED</option>
                  </select>
               </div>
               <div id="dpextra">               
               </div>
            </fieldset>
            <fieldset id="fsa" disabled>
               <legend>Action</legend>
               <input type="hidden" name="hax" value="ax">
               <div class="fel">
                  <label for="axion">On Change</label>
                  <select id="axion" name="axion">                   
                     <option value= "0">[when pin changes...]</option>
                     <option value= "1">No Action</option>
                     <option value= "3">Output Passthru</option>
                     <option value= "2">Publish Pin Value</option>
                     <option value= "9">Publish Var Value</option>                    
                     <option value= "4">Set Var (Pin)</option>
                     <option value= "5">Set Var (Param)</option>
                     <option value= "6">Dec Var</option>
                     <option value= "7">Inc Var</option>
                     <option value= "10">Add to Var</option>
                     <option value= "11">Sub from Var</option>
                     <option value= "8">Command</option>                                                                              
                     <option value= "12">Flash LED</option>
                     <option value= "13">Flash LED PWM</option>
                     <option value= "14">Flash LED Pattern</option>
                     <option value= "15">Stop LED Flash</option>
                  </select>
               </div>
               <div id="axdata">
               </div>
            </fieldset>
            <fieldset id="fsk" disabled>
               <legend>Retain</legend>
               <div>
                     <span class="sm">&nbsp;</span>
                     <span>&nbsp;&nbsp;&nbsp;YES</span>
                     <input id="dpky" type="radio" name="dpkeep" value="1"></input>
                     <span>NO</span>
                     <input id="dpkn" type="radio" name="dpkeep" value="0" checked></input> 
               </div>
               <div>
                     <span class="sm">&nbsp;</span>
                     <span class="sm"><button type="submit">Create Pin</button></span>
               </div>
            </fieldset>
			</form>
		</div>   
	</div>
   
	<div id="logs" class="box eph logs">
      <textarea id="clog"></textarea>
	</div>
   
	<div id="spool" class="box eph spool">
 			<form onsubmit="return spool(event);">
            <fieldset>
               <legend>Event Source</legend>   
               <div class="fel">
                  <select id="ssrc" onChange="spoolChange(this);">
                     <option value= "777">[select a source]</option>                        
                     <option value= "0">Scheduler / Timers</option>
                     <option value= "1">GPIO</option>
                     <option value= "2">MQTT</option>
                     <option value= "3">Web UI</option>
                     <option value= "4">Web REST</option>
                     <option value= "5">Alexa</option>
                     <option value= "6">User Invoke</option>
                     <option value= "7">Synthetic</option>
                 </select>
               </div>
            </fieldset>
            <fieldset>
               <legend>Spool Destinations</legend>              
               <div class="fel">
                  <label>SERIAL</label>  <input class="chx" type="checkbox" value="1" />
                  <label>LOG</label>     <input class="chx" type="checkbox" value="2" />
                  <label>PUBLISH</label> <input class="chx" type="checkbox" value="4" />
                  <label>RAW DATA</label> <input class="chx" type="checkbox" value="8" />
               </div>
               <div class="fel">
                     <label for="sbtn">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><span id="sbtn" class="sm"><button type="submit">Change Spool</button></span>
               </div>
            </fieldset>
         </form>     
	</div>
   <div id="donate" class="box">
      <center>
         Buying me a coffee helps keep me motivated to keep Esparto bug-free and er ...plain "free". It's a lot of work. If it has helped you, I'd appreciate a small sign
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="hidden" name="hosted_button_id" value="NVJKW6HEH5AES" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
<img alt="" border="0" src="https://www.paypal.com/en_FR/i/scr/pixel.gif" width="1" height="1" />
</form>
<div id="linx">
<a href="https://8266iot.blogspot.com" target="_blank">Tips, Hints, More Info</a><span class="lnk">&nbsp;</span>
<a href="https://www.facebook.com/groups/esp8266questions/" target="_blank">Facebook Help Forum</a><span class="lnk">&nbsp;</span>
<a href="https://www.github.com/philbowles/esparto/" target="_blank">Github</a>
</div>
      </center>
   </div>
</html>